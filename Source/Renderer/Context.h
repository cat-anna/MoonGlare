/*
  * Generated by cppsrc.sh
  * On 2017-02-10 21:51:36,38
  * by Kalessin
*/
/*--END OF HEADER BLOCK--*/

#pragma once

#include "nfRenderer.h"
#include "Configuration.Renderer.h"

namespace MoonGlare::Renderer {

class /*alignas(16)*/ Context final {
public:
 	Context();
 	~Context();

	static bool InitializeSubSystem();
	static bool FinalizeSubSystem();

	emath::ivec2 Size() const { return m_Size; }

	void MakeCurrent();

	bool Initialize(const ContextCreationInfo &ctxifo, RendererFacade *renderer, RenderDevice *device);
	bool Finalize();

	GLFWwindow* GetHandle() { return m_Window; }
private: 
	emath::ivec2 m_Size;
	GLFWwindow *m_Window;
	void *padding;

	bool CreateWindow(ContextCreationInfo ctxifo);

	static bool s_GLFWInitialized;
	static void glfw_error_callback(int error, const char* description);
};

static_assert((sizeof(Context) % 16) == 0, "Invalid size!");

} //namespace MoonGlare::Renderer 
