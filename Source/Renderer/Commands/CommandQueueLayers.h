/*
  * Generated by cppsrc.sh
  * On 2016-10-20 21:42:33,06
  * by Paweu
*/
/*--END OF HEADER BLOCK--*/

#pragma once

#include "../Configuration.Renderer.h"
#include "CommandQueue.h"

namespace MoonGlare::Renderer::Commands {

template<typename LAYERENUM>
class CommandQueueLayers {
public:
	using LayerEnum = LAYERENUM;
	using Queue = CommandQueue;
	
	static constexpr uint32_t LayerCount = static_cast<uint32_t>(LayerEnum::MaxValue);

	void Sort() {
		for (auto &it : m_Layers)
			it.Sort();
	}
	void Execute() {
		for (auto &it : m_Layers)
			it.Execute();
	}
	void ClearAllocation() {
		for (auto &it : m_Layers)
			it.ClearAllocation();
	}
	void MemZero() {
		for (auto &it : m_Layers)
			it.MemZero();
	}
	void Clear() {
		for (auto &it : m_Layers)
			it.Clear();
	}

	template<LayerEnum layer>
	Queue& Get() { return m_Layers[static_cast<uint32_t>(layer)]; }
	Queue& operator[](LayerEnum layer) { return m_Layers[static_cast<size_t>(layer)]; }
private: 
	std::array<Queue, LayerCount> m_Layers;
};

} //namespace MoonGlare::Renderer::Commands
