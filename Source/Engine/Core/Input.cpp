/*
	Generated by cppsrc.sh
	On 2014-12-25 23:39:59,76
	by Paweu
*/

#include <pch.h>
#include <MoonGlare.h>

namespace Core {

GABI_IMPLEMENT_CLASS_SINGLETON(Input);
MouseEventDispatcher *Input::_MouseDispatcher = nullptr;

Input::Input(): m_KeyStatus(0), m_MouseDelta(0, 0) {
	SetThisAsInstance();
}

Input::~Input() {
}

//-------------------------------------------------------------------------------------------------

void Input::RefreshKeyMap() {
	m_KeyMap.Clear();
	for (auto &it : Settings->Input.KeyMap) {
		m_KeyMap.AddValue(it.Key, it.Flag);
	}
}

bool Input::Initialize() {
	RefreshKeyMap();
	return true;
}

bool Input::Finalize() {
	Clear();
	return true;
}

//-------------------------------------------------------------------------------------------------

GABI_IMPLEMENT_CLASS(KeyMap)

//-------------------------------------------------------------------------------------------------

void MouseEventDispatcher::Set() {
	Input::SetMouseDispatcher(this);
}

void MouseEventDispatcher::Revoke() {
	Input::RevokeMouseDispatcher(this);
}

} //namespace Core 
