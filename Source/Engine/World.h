/*
  * Generated by cppsrc.sh
  * On 2016-05-03 21:31:13,10
  * by Paweu
*/
/*--END OF HEADER BLOCK--*/

#pragma once
#ifndef World_H
#define World_H

#include "Core/EntityManager.h"
#include "Core/HandleTable.h"
#include "Core/ResourceTable.h"

#include "iConsole.h"

namespace MoonGlare {

class World final {
public:
 	World();
 	~World();

	bool Initialize(Core::Scripts::ScriptEngine *se);
	bool Finalize();
	bool PostSystemInit();
	bool PreSystemStart();
	bool PreSystemShutdown();

	bool Step(const Core::MoveConfig &config);

	Core::EntityManager* GetEntityManager() { return &m_EntityManager; }
	Core::HandleTable* GetHandleTable() { return &m_HandleTable; }
	Core::ResourceTable* GetResourceTable() { return &m_ResourceTable; }
	Core::InputProcessor* GetInputProcessor() { return m_InputProcessor.get(); }
    Core::RuntimeConfiguration* GetRuntimeConfiguration() { return runtimeConfiguration.get(); }

	Core::Scripts::ScriptEngine *GetScriptEngine() { return m_ScriptEngine; };
	Core::Scene::ScenesManager *GetScenesManager() { return m_ScenesManager.get(); };

	Core::Hooks* GetHooks() { return m_Hooks.get(); }

    iConsole* GetConsole() { return m_Console; }
    Core::Engine* GetEngine();

	void SetRendererFacade(Renderer::RendererFacade *c) { m_RendererFacade = c; }
	Renderer::RendererFacade* GetRendererFacade() { return m_RendererFacade; }

	void SetConsole(iConsole *c) { m_Console = c; }
private:
	std::unique_ptr<Core::InputProcessor> m_InputProcessor;
	std::unique_ptr<Core::Scene::ScenesManager> m_ScenesManager;
    std::unique_ptr<Core::Hooks> m_Hooks;
    std::unique_ptr<Core::RuntimeConfiguration> runtimeConfiguration;

	Core::HandleTable m_HandleTable;
	Core::ResourceTable m_ResourceTable;
	Core::EntityManager m_EntityManager;

	//not owning
    iConsole *m_Console = nullptr;
	Renderer::RendererFacade *m_RendererFacade = nullptr;
	Core::Scripts::ScriptEngine *m_ScriptEngine = nullptr;
};

} //namespace MoonGlare

#endif
