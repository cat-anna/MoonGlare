/*
  * Generated by cppsrc.sh
  * On 2015-06-29 10:15:07.37
  * by Immethis
*/
/*--END OF HEADER BLOCK--*/

#include <pch.h>
#include <MoonGlare.h>
#include <iApplication.h>

namespace MoonGlare {
namespace Application {

SPACERTTI_IMPLEMENT_CLASS_SINGLETON(iApplication);

iApplication::iApplication() : BaseClass(), m_Flags(0) {
	SetThisAsInstance();
}

iApplication::~iApplication() {
}

void iApplication::OnActivate() {
	SetInactive(false);
	AddLog(Debug, "Application activated");
}

void iApplication::OnDeactivate() {
	SetInactive(true);
	AddLog(Debug, "Application deactivated");
}

void iApplication::Exit() {
	AddLog(Debug, "Exit called");
	MoonGlare::Core::GetEngine()->Exit();
}

const char* iApplication::ExeName() const {
	return "";
}

//----------------------------------------------------------------------------------

void iApplication::RegisterScriptApi(ApiInitializer &root) {
	root
	.deriveClass<ThisClass, BaseClass>("ciApplication")
		.addFunction("Exit", &iApplication::Exit)
		.addProperty("DoRestart", &iApplication::IsDoRestart, &iApplication::SetDoRestart)
	.endClass()
	;
}

RegisterApiDerivedClass(iApplication, &iApplication::RegisterScriptApi);
RegisterApiInstance(iApplication, &iApplication::Instance, "Application");

} //namespace Application 
} //namespace MoonGlare 
