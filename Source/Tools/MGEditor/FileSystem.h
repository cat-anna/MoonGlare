/*
  * Generated by cppsrc.sh
  * On 2016-07-22 11:09:18,36
  * by Paweu
*/
/*--END OF HEADER BLOCK--*/

#pragma once
#ifndef FileSystem_H
#define FileSystem_H

#include <qobject.h>
#include "Notifications.h"

#include <StarVFS/core/nStarVFS.h>

namespace StarVFS {
	class StarVFS;
	using SharedStarVFS = std::shared_ptr<StarVFS>;
}

namespace MoonGlare {
namespace Editor {

class FileSystem 
	: public QObject
	, std::enable_shared_from_this<FileSystem> {
	Q_OBJECT;
public:
 	FileSystem();
 	virtual ~FileSystem();

	StarVFS::SharedStarVFS GetVFS() { return m_VFS; }

	bool GetFileData(const std::string &uri, StarVFS::ByteTable &data);
	bool SetFileData(const std::string &uri, StarVFS::ByteTable &data);
	bool CreateFile(const std::string &uri);
	bool CreateDirectory(const std::string &uri);
public slots:
	void Reload();
signals:
	void Changed();
protected slots:
	void ProjectChanged(Module::SharedDataModule datamod);

private:
	StarVFS::SharedStarVFS m_VFS;
	std::string m_BasePath;
	Module::SharedDataModule m_Module;
	bool TranslateURI(const std::string &uri, std::string &out);
};

using SharedFileSystem = std::shared_ptr<FileSystem>;

} //namespace Editor 
} //namespace MoonGlare 

#endif
