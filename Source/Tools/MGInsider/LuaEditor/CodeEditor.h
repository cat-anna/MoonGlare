/*
  * Generated by cppsrc.sh
  * On 2015-08-08 19:18:32,20
  * by Paweu
*/
/*--END OF HEADER BLOCK--*/

#pragma once
#ifndef CodeEditor_H
#define CodeEditor_H

struct CompilationResult;
struct EditorStatusText;
class EditorTab;

class CodeEditor : public QPlainTextEdit {
	Q_OBJECT
public:
	CodeEditor(EditorTab *Owner, QWidget *parent = 0);
	void lineNumberAreaPaintEvent(QPaintEvent *event);
	int lineNumberAreaWidth(); 

	class LineNumberArea;
	void SetCodeAdnotations(std::shared_ptr<CompilationResult> result);
	void GetStatusText(EditorStatusText &text);
protected:
	void resizeEvent(QResizeEvent *e) Q_DECL_OVERRIDE;


	std::shared_ptr<CompilationResult> m_CompilationResult;
private:
	QWidget *lineNumberArea;
	EditorTab *m_Owner;
private slots:
	void updateLineNumberAreaWidth(int newBlockCount);
	void highlightCurrentLine();
	void updateLineNumberArea(const QRect &rect, int dy);
};

#endif
